<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Job chooser</title>
    <style>
        body {
            user-select: none;
            color: #daa520;
        }

        img {
            height: 329px;
        }

        .checkboxes {
            display: flex;
        }

        .biggerButton {
            height: 80px;
            width: 100px;
            margin-bottom: 10px;
            opacity: 100%;
        }

        button {
            opacity: 70%;
        }

        #tankButton {
            background-color: blue;
            font-size: large;
        }

        #healerButton {
            background-color: green;
            font-size: large;
        }

        #DPSButton {
            background-color: red;
            font-size: large;
        }

        #Checks {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
        }

        .jobButton {
            position: absolute;
            top: 400px;
        }
    </style>
</head>

<body>
    <div id="filterbutton">
        <button onclick="filterView()" style="height: 75px; width: 100px; font-size: large;">Filter</button>
    </div>
    <div id="scree">
        <h1>Choose a random FFXIV job!</h1>
        <div>
            <button class="jobButton" onClick="updateView()"
                style="height: 250px; width: 250px; font-size: x-large; ">Find a
                job</button>
        </div>
    </div>
    <div id="imagur"></div>

</body>
<script>
    //Modell
    let jobNumber;
    let jobs = [
        { jobName: "Paladin", role: "tank", color: 'blue', checked: true, info: "Paladin is a defensive job, that can protect allies as well as itself. Although it uses sword and shield,it also possesses both offensive magic and healing magic, in form of light magic." },
        { jobName: "Gunbreaker", role: "tank", color: 'blue', checked: true, info: "Gunbreaker is a destructive job, who uses a gunblade, a blade that can set of explosions with its strikes. In higher levels, you can use certain weapon skills in double time which makes it an intense job." },
        { jobName: "Dark knight", role: "tank", color: 'blue', checked: true, info: "Dark knight uses a two-handed great sword and dark magic to inflict damage on their enemies and defend themselves and their allies." },
        { jobName: "Warrior", role: "tank", color: 'blue', checked: true, info: "Warrior is beast incarnate. All warriors have an inner beast who is just waiting to let loose with devastating attacks, delivered by a big heavy axe." },
        { jobName: "Reaper", role: "DPS", sub_role: "melee", color: 'red', checked: true, info: "Reap your enemies' soul with your scythe, and invoke a ghost like avatar to take over you to bring high intensity attacks." },
        { jobName: "Ninja", role: "DPS", sub_role: "melee", color: 'red', checked: true, info: "With a set of daggers the ninja slashes their enemies. By using ninjutsu you can unleash a high variety of attacks on your enemies." },
        { jobName: "Samurai", role: "DPS", sub_role: "melee", color: 'red', checked: true, info: "The samurai performs different combos to amass power to be unleahed in high damage attacks by using their katana." },
        { jobName: "Monk", role: "DPS", sub_role: "melee", color: 'red', checked: true, info: "The absolute melee DPS, the monk attacks rapidly with their punches and kicks from all directions. By using chakra they can unleash powerful attacks." },
        { jobName: "Dragoon", role: "DPS", sub_role: "melee", color: 'red', checked: true, info: "Trained as dragon hunters, the dragoon uses a lance and jumping attacks to pierce their enemies. They also apply the dragons' own powers in battle." },
        { jobName: "Bard", role: "DPS", sub_role: "physicalrange", color: 'red', checked: true, info: "The bard attacks by using a bow with differnt type of arrows, some to do direct damage, and others to do damage over time. However, they support their allies with music and songs on the battlefield." },
        { jobName: "Machinist", role: "DPS", sub_role: "physicalrange", color: 'red', checked: true, info: "With a gun the machinist takes down their enemies using an array of different attacks. Straightforward combos." },
        { jobName: "Dancer", role: "DPS", sub_role: "physicalrange", color: 'red', checked: true, info: "Buff your allies with your high spirited dances, and choose a partner to share your other buffs with." },
        { jobName: "Red mage", role: "DPS", sub_role: "magicrange", color: 'red', checked: true, info: "Wield both offensive and healing magic with ease. Build up your reservoires of red magic by alternating between which spells you use, and unleash it with your rapier. Red mages are very versatile." },
        { jobName: "Black mage", role: "DPS", sub_role: "magicrange", color: 'red', checked: true, info: "Using the void as a source for their powers, the black mage delivers devastating attacks with fire, and replenish their mana with ice spells. The black mage is not very mobile, but hits HARD." },
        { jobName: "Summoner", role: "DPS", sub_role: "magicrange", color: 'red', checked: true, info: "Channeling the essence of Ifrit, Garuda and Titan, the summoner can command the primals' powers to fight their enemies. To play summoner does not require much input and is easy job to play." },
        { jobName: "Scholar", role: "healer", sub_role: "protective", color: 'green', checked: true, info: "Using arcanima the scholars both heal and shield their allies. The scholar can also summon a fairy to help them with healing." },
        { jobName: "White mage", role: "healer", sub_role: "regenerative", color: 'green', checked: true, info: "The white mage is the most potent healer, using a cane and the elements of the forest. White mages have the ability to use regenerative healing." },
        { jobName: "Astrologian", role: "healer", sub_role: "regenerative", color: 'green', checked: true, info: "By reading the stars and using their powers, astrologians can heal their allies with regenerative effects. They also have a deck of tarot cards which they can use to buff other allies with." },
        { jobName: "Sage", role: "healer", sub_role: "protective", color: 'green', checked: true, info: "Masters of knowledge, the sage heals, protects and attacks with great effiency. The sage can cast barriers on their allies, and launch a stronger attack when that barrier breaks." },
    ]
        ;
    let filteredJobs = jobs;
    let ofon;

    //View
    function updateView() {
        document.getElementById('filterbutton').innerHTML = /*html*/ `
        <button onclick="filterView()" style="height: 75px; width: 100px; font-size: large;">Filter</button>
        `
        randomJob()
        document.body.style.backgroundColor = filteredJobs[jobNumber].color;


        document.getElementById('scree').innerHTML = /*HTML*/ `
        <h1>${filteredJobs[jobNumber].jobName}</h1>
        <br><p style="font-weight: bold;">${filteredJobs[jobNumber].info}</p>
        `

        document.getElementById('imagur').innerHTML = /*HTML*/ `
        <div>
            <button class="jobButton" onClick="updateView();" style="height: 250px; width: 250px; font-size: x-large;">Another job</button>
        </div>
        `

    }

    function filterView(filter, ofon) {
        document.body.style.backgroundColor = 'beige';

        document.getElementById("filterbutton").innerHTML = /*html*/ `
        <button class="biggerButton" onClick="updateView()" style="height: 75px; width: 100px; font-size: large;">Find a job</button>
        `
        document.getElementById('scree').innerHTML = /*html*/ `
        <h2>Specify which role you want to choose from<h2>
            <div id="filterAlert"><br></div> <!--Brukes for å displaye hvilket filter er trykket på-->
            <hr>
            <button id="tankButton" class="biggerButton" onclick="tankFilter()">Tank</button><br>
            <button id="healerButton" class="biggerButton" onclick="healerFilter()">Healer</button><br>
            <button id="healerButton" class="biggerButton" onclick="regenFilter()">Regen</button>
            <button id="healerButton" class="biggerButton" onclick="barrierFilter()">Barrier</button><br>
            <button id="DPSButton" class="biggerButton" onclick="DPSFilter()">DPS</button><br>
            <button id="DPSButton" class="biggerButton" onclick="meleeFilter()">Melee</button>
            <button id="DPSButton" class="biggerButton" onclick="rangeFilter()">Range</button>
            <button id="DPSButton" class="biggerButton" onclick="magicFilter()">Magic</button>
            <hr>
            <button class="biggerButton" onclick="toggleFilter()">Toggle all</button>
            <hr>
            <h2>Check off the jobs individually</h2>
            <div id="Checks">
                
                </div>
                <hr>
            
           
        `
        for (let i = 0; i < jobs.length; i++) {
            if (jobs[i].checked === true) {
                document.getElementById('Checks').innerHTML += /*html*/`
            <input type='checkbox' id='${jobs[i].jobName}' checked onchange="filterOff(${i})"><p style='margin-top: 0px;'> ${jobs[i].jobName} </p>
                    `}
            else {
                document.getElementById('Checks').innerHTML += /*html*/`
                    <input type = 'checkbox' id = '${jobs[i].jobName}' onchange='filterOn(${i})'> <p style='margin-top: 0px;'> ${jobs[i].jobName} </p>
            `};
        }
        document.getElementById('imagur').innerHTML = '';
        alertOfFilter(filter);
    }
    //Controller

    function randomJob() { /*velger et tilfeldig tall for de jobbene som kan velges*/
        jobNumber = Math.floor(Math.random() * filteredJobs.length);
        console.log(jobNumber);
    }

    function tankFilter() { /*Gjør sånn at bare tanks kan velges*/
        // filteredJobs = []
        // for (let i = 0; i < jobs.length; i++) {
        //     if (jobs[i].role == "tank") {
        //         filteredJobs.push(jobs[i]);
        //         jobs[i].checked = true;
        //     }
        //     else { jobs[i].checked = false; }
        // }
        if (filteredJobs.length == 19) {
            for (let i = 0; i < jobs.length; i++) {
                if (jobs[i].role != 'tank') {
                    jobs[i].checked = false;
                }
                filteredByJobs();
            }
            ofon = 'on';
        }
        else if (jobs[0].checked && jobs[1].checked && jobs[2].checked && jobs[3].checked) {
            for (let i = 0; i < jobs.length; i++) {
                if (jobs[i].role == 'tank') {
                    jobs[i].checked = false;
                }
                filteredByJobs();
            }
            ofon = 'off';
        }
        else {
            for (let i = 0; i < jobs.length; i++) {
                if (jobs[i].role == 'tank') {
                    jobs[i].checked = true;
                }
                filteredByJobs();
            }
            ofon = 'on';
        }
        console.log(filteredJobs);
        filterView('Tank', ofon);

    }
    function healerFilter() { /*Gjør sånn at bare healers kan velges*/
        // filteredJobs = []
        // for (let i = 0; i < jobs.length; i++) {
        //     if (jobs[i].role == "healer") {
        //         filteredJobs.push(jobs[i]);
        //         jobs[i].checked = true;
        //     }
        //     else { jobs[i].checked = false; }
        // }
        if (filteredJobs.length == 19) {
            for (let i = 0; i < jobs.length; i++) {
                if (jobs[i].role != 'healer') {
                    jobs[i].checked = false;
                }
                filteredByJobs();
            }
            ofon = 'on';
        }
        else if (jobs[15].checked && jobs[16].checked && jobs[17].checked && jobs[18].checked) {
            for (let i = 0; i < jobs.length; i++) {
                if (jobs[i].role == 'healer') {
                    jobs[i].checked = false;
                }
                filteredByJobs();
            }
            ofon = 'off';
        }
        else {
            for (let i = 0; i < jobs.length; i++) {
                if (jobs[i].role == 'healer') {
                    jobs[i].checked = true;
                }
                filteredByJobs();
            }
            ofon = 'on';
        }

        console.log(filteredJobs);
        filterView('Healer', ofon);
    }
    function regenFilter() { /*Gjør sånn at bare regen healers kan velges*/
        // filteredJobs = []
        // for (let i = 0; i < jobs.length; i++) {
        //     if (jobs[i].sub_role == "regenerative") {
        //         filteredJobs.push(jobs[i]);
        //         jobs[i].checked = true;
        //     }
        //     else { jobs[i].checked = false; }
        // }
        if (filteredJobs.length == 19) {
            for (let i = 0; i < jobs.length; i++) {
                if (jobs[i].sub_role != 'regenerative') {
                    jobs[i].checked = false;
                }
                filteredByJobs();
            }
            ofon = 'on';
        }
        else if (jobs[16].checked && jobs[17].checked) {
            for (let i = 0; i < jobs.length; i++) {
                if (jobs[i].sub_role == 'regenerative') {
                    jobs[i].checked = false;
                }
                filteredByJobs();
            } ofon = 'off';
        }
        else {
            for (let i = 0; i < jobs.length; i++) {
                if (jobs[i].sub_role == 'regenerative') {
                    jobs[i].checked = true;
                }
                filteredByJobs();
            }
            ofon = 'on';
        }
        console.log(filteredJobs);
        filterView('Regen', ofon);
    }
    function barrierFilter() { /*Gjør sånn at bare barrier healers kan velges*/
        // filteredJobs = []
        // for (let i = 0; i < jobs.length; i++) {
        //     if (jobs[i].sub_role == "protective") {
        //         filteredJobs.push(jobs[i]);
        //         jobs[i].checked = true;
        //     }
        //     else { jobs[i].checked = false; }
        // }
        if (filteredJobs.length == 19) {
            for (let i = 0; i < jobs.length; i++) {
                if (jobs[i].sub_role != 'protective') {
                    jobs[i].checked = false;
                }
                filteredByJobs();
            }
            ofon = 'on';
        }
        else if (jobs[15].checked && jobs[18].checked) {
            for (let i = 0; i < jobs.length; i++) {
                if (jobs[i].sub_role == 'protective') {
                    jobs[i].checked = false;
                }
                filteredByJobs();
            }
            ofon = 'off';
        }
        else {
            for (let i = 0; i < jobs.length; i++) {
                if (jobs[i].sub_role == 'protective') {
                    jobs[i].checked = true;
                }
                filteredByJobs();
            }
            ofon = 'on';
        }

        console.log(filteredJobs);
        filterView('Barrier', ofon);
    }

    function DPSFilter() { /*Gjør sånn at bare dps kan velges*/
        // filteredJobs = []
        // for (let i = 0; i < jobs.length; i++) {
        //     if (jobs[i].role == "DPS") {
        //         filteredJobs.push(jobs[i]);
        //         jobs[i].checked = true;
        //     }
        //     else { jobs[i].checked = false; }
        // }
        if (filteredJobs.length == 19) {
            for (let i = 0; i < jobs.length; i++) {
                if (jobs[i].role != 'DPS') {
                    jobs[i].checked = false;
                }
                filteredByJobs();
            }
            ofon = 'on';
        }
        else if (jobs[4].checked && jobs[5].checked && jobs[6].checked && jobs[7].checked && jobs[8].checked && jobs[9].checked && jobs[10].checked && jobs[11].checked && jobs[12].checked && jobs[13].checked && jobs[14].checked) {
            for (let i = 0; i < jobs.length; i++) {
                if (jobs[i].role == 'DPS') {
                    jobs[i].checked = false;
                }
                filteredByJobs();
            }
            ofon = 'off';
        }
        else {
            for (let i = 0; i < jobs.length; i++) {
                if (jobs[i].role == 'DPS') {
                    jobs[i].checked = true;
                }
                filteredByJobs();
            }
            ofon = 'on';
        }

        console.log(filteredJobs);
        filterView('DPS', ofon);
    }

    function rangeFilter() { /*gjør sånn at bare fysisk langdistanse dps kan velges*/
        // filteredJobs = []
        // for (let i = 0; i < jobs.length; i++) {
        //     if (jobs[i].sub_role == "physicalrange") {
        //         filteredJobs.push(jobs[i]);
        //         jobs[i].checked = true;
        //     }
        //     else { jobs[i].checked = false; }
        // }
        if (filteredJobs.length == 19) {
            for (let i = 0; i < jobs.length; i++) {
                if (jobs[i].sub_role != 'physicalrange') {
                    jobs[i].checked = false;
                }
                filteredByJobs();
            }
            ofon = 'on';
        }
        else if (jobs[9].checked && jobs[10].checked && jobs[11].checked) {
            for (let i = 0; i < jobs.length; i++) {
                if (jobs[i].sub_role == 'physicalrange') {
                    jobs[i].checked = false;
                }
                filteredByJobs();
            }
            ofon = 'off';
        }
        else {
            for (let i = 0; i < jobs.length; i++) {
                if (jobs[i].sub_role == 'physicalrange') {
                    jobs[i].checked = true;
                }
                filteredByJobs();
            }
            ofon = 'on';
        }


        console.log(filteredJobs);
        filterView('Range', ofon);
    }

    function meleeFilter() { /*gjør sånn at bare nærkamp dps kan velges*/
        // filteredJobs = []
        // for (let i = 0; i < jobs.length; i++) {
        //     if (jobs[i].sub_role == "melee") {
        //         filteredJobs.push(jobs[i]);
        //         jobs[i].checked = true;
        //     }
        //     else { jobs[i].checked = false; }
        // }
        if (filteredJobs.length == 19) {
            for (let i = 0; i < jobs.length; i++) {
                if (jobs[i].sub_role != 'melee') {
                    jobs[i].checked = false;
                }
                filteredByJobs();
            }
            ofon = 'on';
        }
        else if (jobs[4].checked && jobs[5].checked && jobs[6].checked && jobs[7].checked && jobs[8].checked) {
            for (let i = 0; i < jobs.length; i++) {
                if (jobs[i].sub_role == 'melee') {
                    jobs[i].checked = false;
                }
                filteredByJobs();
            }
            ofon = 'off';
        }
        else {
            for (let i = 0; i < jobs.length; i++) {
                if (jobs[i].sub_role == 'melee') {
                    jobs[i].checked = true;
                }
                filteredByJobs();
            }
            ofon = 'on';
        }
        console.log(filteredJobs);
        filterView('Melee', ofon);
    }

    function magicFilter() { /*gjør sånn at bare magisk dps kan velges*/
        // filteredJobs = []
        // for (let i = 0; i < jobs.length; i++) {
        //     if (jobs[i].sub_role == "magicrange") {
        //         filteredJobs.push(jobs[i]);
        //         jobs[i].checked = true;
        //     }
        //     else { jobs[i].checked = false; }
        // }
        if (filteredJobs.length == 19) {
            for (let i = 0; i < jobs.length; i++) {
                if (jobs[i].sub_role != 'magicrange') {
                    jobs[i].checked = false;
                }
                filteredByJobs();
            }
            ofon = 'on';
        }
        else if (jobs[12].checked && jobs[13].checked && jobs[14].checked) {
            for (let i = 0; i < jobs.length; i++) {
                if (jobs[i].sub_role == 'magicrange') {
                    jobs[i].checked = false;
                }
                filteredByJobs();
            }
            ofon = 'off';
        }
        else {
            for (let i = 0; i < jobs.length; i++) {
                if (jobs[i].sub_role == 'magicrange') {
                    jobs[i].checked = true;
                }
                filteredByJobs();
            }
            ofon = 'on';
        }
        console.log(filteredJobs);
        filterView('Magic', ofon);
    }

    function filterOn(i) { /*Filterfunksjon for enkel checkbox, som setter jobben inn i valget*/
        jobs[i].checked = true;
        filteredJobs = [];
        for (let i = 0; i < jobs.length; i++) {
            if (jobs[i].checked === true) { filteredJobs.push(jobs[i]) }
        }
        console.log(filteredJobs)
        filterView()
    }
    function filterOff(i) { /*Filterfunksjon for enkel checkbox, som setter jobben ut i valget*/
        jobs[i].checked = false;
        filteredJobs = [];
        for (let i = 0; i < jobs.length; i++) {
            if (jobs[i].checked === true) { filteredJobs.push(jobs[i]) }
        }
        console.log(filteredJobs)
        filterView()
    }

    function toggleFilter() { /*fjerner filtret sånn at alle kan velges*/
        // filteredJobs = jobs;
        // for (let i = 0; i < jobs.length; i++) {
        //     jobs[i].checked = true
        // }
        // filterView();
        if (filteredJobs.length > 0) { //vil prioritere å gjøre alle false enn true
            for (let i = 0; i < jobs.length; i++) {
                jobs[i].checked = false
            }
            ofon = 'off';
        }
        else {
            for (let i = 0; i < jobs.length; i++) {
                jobs[i].checked = true;
            }
            ofon = 'on';
        }
        filteredJobs = [];
        for (let i = 0; i < jobs.length; i++) {
            if (jobs[i].checked === true) { filteredJobs.push(jobs[i]) }
        }
        filterView('All', ofon);
    }

    function alertOfFilter(filter) {
        if (filter) {
            document.getElementById('filterAlert').innerHTML = /*html*/ `
            ${filter} is filtered ${ofon}!
            `
        }

        else return;
    }

    function filteredByJobs() {
        filteredJobs = [];
        for (let i = 0; i < jobs.length; i++) {
            if (jobs[i].checked === true) { filteredJobs.push(jobs[i]) }
        }
    }
</script>

</html>